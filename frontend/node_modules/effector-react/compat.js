'use strict';function e(e){return e&&'object'==typeof e&&'default'in e?e.default:e}function t(e,t,n){var r=[f.step.run({fn:function(e){return t(e)}})];if(n){var o=f.createNode({node:r}),u=e.graphite.id,a=n.additionalLinks,c=a[u]||[];return a[u]=c,c.push(o),function(){var e=c.indexOf(o);-1!==e&&c.splice(e,1),f.clearNode(o)}}var i=f.createNode({node:r,parent:[e],family:{owners:e}});return function(){f.clearNode(i)}}function n(e,t){return t.displayName=e,t}function r(e,n){f.is.store(e)||v('expect useStore argument to be a store');var r=d(e,n),o=y(),u=l.useRef({store:e,value:r,pending:0});return p((function(){var r=t(e,(function(e){var t=u.current;t.pending||(t.value=e,t.pending=1,o(),t.pending=0)}),n),a=d(e,n),c=u.current;return c.store===e&&c.value!==a&&(c.value=a,c.pending=1,o(),c.pending=0),c.store=e,r}),[e,n]),r}function o(e,n){var r,o,a,c=e[0],i=e[1],s=m;i?(r=i,o=c,a=[]):(r=c.fn,o=c.store,a=c.keys,s=c.updateFilter||m),f.is.store(o)||v('useStoreMap expects a store'),Array.isArray(a)||v('useStoreMap expects an array as keys'),'function'!=typeof r&&v('useStoreMap expects a function');var x=l.useRef({}),g=x.current;g.fn=r,g.upd=s,g.init=g.store===o,g.store=o;var k=y(),h=[n].concat(a),S=l.useMemo((function(){return u(d(o,n),a,x.current),t(o,(function(e){return u(e,a,x.current,k)}),n)}),h);return p((function(){return function(){return S()}}),h),g.val}function u(e,t,n,r){var o=n.fn(e,t);n.init?void 0!==o&&m(o,n.val)&&n.upd(o,n.val)&&(n.val=o,r&&r()):(n.val=o,n.init=1)}function a(e){return r(e)}function c(e,t){function r(e){var n=l.useRef(e),r=a(o);p((function(){return c({props:n.current,state:o.getState()}),function(){i({props:n.current,state:o.getState()})}}),[]);var u=t(e,r);return n.current=e,u}var o;f.is.store(e)?o=e:'object'==typeof e&&null!==e?o=f.combine(e):v('shape should be a store or object with stores');var u='Unknown';o&&o.shortName&&(u=o.shortName);var c=f.createEvent(),i=f.createEvent();return r.mounted=c,r.unmounted=i,n(u+".View",r)}function i(e,t){void 0===t&&(t={});var n=l.useRef({value:null,count:0});p((function(){return e.open(n.current.value),function(){return e.close(n.current.value)}}),[e]),function(e,t){if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return 0;for(var o=0;o<n.length;o++){var u=n[o];if(e[u]!==t[u])return 0}return 1}return 0}(n.current.value,t)||(n.current.value=t,n.current.count+=1),p((function(){e.set(n.current.value)}),[n.current.count])}Object.defineProperty(exports,'__esModule',{value:1});var s=require('react'),f=require('effector/compat'),l=e(s),p='undefined'!=typeof window?l.useLayoutEffect:l.useEffect,v=function(e){throw Error(e)},d=function(e,t){return t?t.getState(e):e.getState()},m=function(e,t){return e!==t},y=function(){return l.useReducer((function(e){return e+1}),0)[1]},x=function(e){return console.error(e+" is deprecated")},g=function(e){return function(t){var r=e;return'function'!=typeof e&&(r=t,t=e),n("Connect("+(r.displayName||r.name||'Unknown')+")",(function(e){return l.createElement(r,Object.assign({},e,a(t)))}))}};exports.connect=g,exports.createComponent=c,exports.createContextComponent=function(e,t,r){return x('createContextComponent'),n((e.shortName||'Unknown')+".ContextComponent",(function(n){var o=l.useContext(t),u=a(e);return r(n,u,o)}))},exports.createGate=function(e,t){var r;return void 0===e&&(e='gate'),void 0===t&&(t={}),'object'==typeof e&&null!==e&&('defaultState'in e&&(t=e.defaultState),e.domain&&(r=e.domain),e=e.name),function(e){function t(e){return a(t,e),null}var r=e.name,o=e.domain,u=e.defaultState,a=e.hook,c=(o?o.compositeName.fullName+"/":'')+(void 0===r?'gate':r),i=f.createEvent(c+".set"),s=f.createEvent(c+".open"),l=f.createEvent(c+".close"),p=f.createStore(Boolean(0),{name:c+".status"}).on(s,(function(){return Boolean(1)})).on(l,(function(){return Boolean(0)})),v=f.createStore(u,{name:c+".state"}).on(i,(function(e,t){return t})).reset(l);if(o){var d=o.hooks;f.launch({target:[d.store,d.store,d.event,d.event,d.event],params:[p,v,s,l,i]})}return t.open=s,t.close=l,t.status=p,t.state=v,t.set=i,n("Gate:"+c,t)}({name:e,domain:r,defaultState:t,hook:i})},exports.createReactState=function(e,t){return x('createReactState'),g(t)(e)},exports.createStoreConsumer=function(e){return c(e,(function(e,t){return(0,e.children)(t)}))},exports.useEvent=function(e){return e},exports.useGate=i,exports.useList=function(e,t){return function(e,t,u){var a,c,i=[];'object'==typeof t&&null!==t?(t.keys&&(i=t.keys),a=t.fn,t.getKey&&(c=t.getKey)):a=t,f.is.store(e)||v('expect useList first argument to be a store'),'function'!=typeof a&&v("expect useList's renderItem to be a function"),Array.isArray(i)||v("expect useList's keys to be an array");var s=l.useMemo((function(){var t=n((e.shortName||'Unknown')+".Item",(function(t){var n=t.index,r=t.keys;if(p.current[1])return p.current[0](t.value,t.keyVal);var a=o([{store:e,keys:[n].concat(r),fn:function(e,t){return e[t[0]]}}],u);return p.current[0](a,n)}));return l.memo(t)}),[e,u,!!c]),p=l.useRef([a,c]);p.current=[a,c];var d=l.useMemo((function(){return i}),i);if(c)return r(e,u).map((function(e){var t=p.current[1](e);return l.createElement(s,{keyVal:t,key:t,keys:d,value:e})}));var m=o([{store:e,keys:[e],fn:function(e){return e.length}}],u);return Array.from({length:m},(function(e,t){return l.createElement(s,{index:t,key:t,keys:d})}))}(e,t)},exports.useStore=a,exports.useStoreMap=function(e,t){return o([e,t])};
//# sourceMappingURL=compat.js.map
